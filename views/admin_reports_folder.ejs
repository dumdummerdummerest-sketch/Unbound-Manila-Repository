<head>
    <meta charset="utf-8">
    <title>Admin Reports Folder</title>
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <link rel="stylesheet" href="/css/admin_reports_folder_style.css">
</head>

<body>

    <main>
        <div class="container">
        <div class="sidebar">
            <img src="/logo.png" style="scale:55%; margin: auto; ">
            <nav class="nav-menu">
                <button class="nav-btn" id="back-btn" onclick="history.back()"> Back to SDW Reports</button>
                <a href="/logout" class="nav-btn" data-category="Logout" id="logout">Logout</a>
            </nav>
        </div>

        <div class="content">
            <div class="content-main">
                
                <div class="report-view-container">
                <div class="report-header">
                    <h1 class="report-title"><%= currentCategory %></h1>
                    <div class="sort-container">
                        <label for="sort-by">Sort By:</label>
                        <!-- Add here further options for sorting-->
                        <select id="sort-by" class="sort-select">
                            <option value="latest">Latest</option>
                            <option value="file-size">File Size</option>
                            <option value="alphabetical">Alphabetically</option>
                        </select>
                    </div>
                </div>

                <% if (reports.length === 0) { %>
                    <div class="empty-state">
                        <p class="upload-text">No reports found for <strong><%= currentCategory %></strong>.</p>
                    </div>

                <% } else { %>
                    <div class="report-grid">
                        <% reports.forEach(report => { %>
                            <input type="hidden" id="fileSize" value="<%= report.file_size%>">
                            <div class="report-card" 
                                 data-report-id="<%= report.report_id %>"
                                 data-report-name="<%= report.report_name %>"
                                 data-report-date="<%= report.upload_date %>"
                                 data-report-type="<%= report.type || 'Unknown' %>">

                                 <%# For the report id, we can probably join to the sdw table to show name instead %>
                                 
                                <div class="report-thumbnail">
                                    <div class="thumbnail-placeholder">
                                        <span>ðŸ“„</span>
                                    </div>
                                </div>
                                
                                <div class="report-info">
                                    <span class="report-name"><%= report.report_name %></span>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } %>

                
            </div>

            </div>
        </div>
    </main>

    <!-- Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <div class="modal-header">
                <!-- Change this later to correctly print the file name-->
                <h2 class="modal-title" id="modalFileName"> <%= reports.file_path %> </h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>

            <div class="modal-body">
                <div class="preview-container" id="previewContainer">
                    <div class="preview-placeholder">
                        <!-- Also change this-->
                        <div>ðŸ“„</div>
                        <p>Preview not available</p>
                        <small>Click download to view the file</small>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <div class="file-info" id="fileInfo">
                    <!-- Change this further tor proper file information -->
                    <strong>Uploaded:</strong> <span id="uploadDate">-</span> | 
                    <strong>Size:</strong> <span id="fileSize">-</span> | 
                    <strong>By:</strong> <span id="uploader">-</span>
                </div>
                <div class="modal-buttons">
                    <button class="btn-download" id="btnDownload">
                        Download
                    </button>
                    <button class="btn-delete" id="btnDelete">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Access the srcipt for the functionalities for the reports-->
    <script src="/js/admin_reports_functionality.js"></script>
</body>
